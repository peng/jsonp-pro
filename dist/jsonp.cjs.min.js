"use strict";function typeCheck(e,t){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}function randNum(){return(new Date).getTime().toString()+Math.ceil(1e10*Math.random()).toString()}function removeChild(e,t){for(var r=e.childNodes,n=0;n<r.length;n++)r[n]===t&&e.removeChild(t)}function index(e,t){var r,n,o,c=document.querySelector("head"),a=document.createElement("script"),i="",u="callback",l="callback_".concat(randNum()),m=!1,s=6e4,d=[];if(!e)throw new ReferenceError("No url ! Url is necessary !");if(!typeCheck(e,"String"))throw new TypeError("Url must be string !");var f={data:function(){var e=t.data;if(typeCheck(e,"Object"))for(var r in e)i+="".concat(r,"=").concat(e[r],"&");else{if(!typeCheck(e,"String"))throw new TypeError("data must be object or string !");i=e+"&"}},success:function(){if(!typeCheck(o=t.success,"Function"))throw new TypeError("param success must be function !")},error:function(){if(!typeCheck(t.error,"Function"))throw new TypeError("param error must be function !");a.addEventListener("error",t.error)},loaded:function(){if(!typeCheck(n=t.loaded,"Function"))throw new TypeError("param loaded must be function !")},callback:function(){if(!typeCheck(u=t.callback,"String"))throw new TypeError("param callback must be string !")},callbackName:function(){if(!typeCheck(l=t.callbackName,"String"))throw new TypeError("param callbackName must be string !")},noCallback:function(){if(!typeCheck(m=t.noCallback,"Boolean"))throw new TypeError("param noCallback must be boolean !")},charset:function(){var e=t.charset;if(!typeCheck(e,"String"))throw new TypeError("param charset must be string !");a.charset=e},timeoutTime:function(){if(!typeCheck(s=t.timeoutTime,"Number"))throw new TypeError("param timeoutTime must be number !")},timeout:function(){if(!typeCheck(t.timeout,"Function"))throw new TypeError("param timeout must be function !");function e(){r=setTimeout(function(){removeChild(a.parentNode,a),window.hasOwnProperty(l)&&delete window[l],clearTimeout(r),t.timeout()},s)}d.push(e)}};for(var h in t)f[h]();d.forEach(function(e){e()}),m&&""!=i&&(-1==e.indexOf("?")?e+="?".concat(i.slice(0,-1)):e+="&".concat(i.slice(0,-1))),m||(window[l]=function(e){o&&o(e),removeChild(c,a),delete window[l]},-1==e.indexOf("?")?e+="?".concat(i).concat(u,"=").concat(l):e+="&".concat(i).concat(u,"=").concat(l)),e=encodeURI(e),a.addEventListener("load",function e(){a.removeEventListener("load",e),n&&n(),clearTimeout(r),removeChild(c,a)}),a.src=e,c.appendChild(a)}module.exports=index;
